-- Generated by Oracle SQL Developer Data Modeler 18.3.0.268.1156
--   at:        2019-03-14 17:55:06 MSK
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



CREATE TABLE comments (
    comment_id     NUMBER(38) NOT NULL,
    comment_desc   VARCHAR2(500)
);

ALTER TABLE comments ADD CONSTRAINT comments_pk PRIMARY KEY ( comment_id );

CREATE TABLE estimates (
    estimate_id     NUMBER(38) NOT NULL,
    lab_id          NUMBER(38),
    student_id      NUMBER(38) NOT NULL,
    estimate_desc   NUMBER(38),
    comment_id      NUMBER(38) NOT NULL
);

ALTER TABLE estimates ADD CONSTRAINT estimates_pk PRIMARY KEY ( estimate_id );

CREATE TABLE faculty (
    faculty_id     NUMBER(38) NOT NULL,
    faculry_name   VARCHAR2(200)
);

ALTER TABLE faculty ADD CONSTRAINT faculty_pk PRIMARY KEY ( faculty_id );

CREATE TABLE "GROUP" (
    group_id        NUMBER(38) NOT NULL,
    group_name      VARCHAR2(6),
    speciality_id   NUMBER(38) NOT NULL
);

ALTER TABLE "GROUP" ADD CONSTRAINT group_pk PRIMARY KEY ( group_id );

CREATE TABLE labs (
    lab_id       NUMBER(38) NOT NULL,
    lab_desc     VARCHAR2(500),
    comment_id   NUMBER(38) NOT NULL,
    subject_id   NUMBER(38) NOT NULL
);

ALTER TABLE labs ADD CONSTRAINT labs_pk PRIMARY KEY ( lab_id );

CREATE TABLE speciality (
    speciality_id     NUMBER(38) NOT NULL,
    speciality_name   VARCHAR2(200) NOT NULL,
    faculty_id        NUMBER(38) NOT NULL
);

ALTER TABLE speciality ADD CONSTRAINT speciality_pk PRIMARY KEY ( speciality_id );

CREATE TABLE student (
    student_id      NUMBER NOT NULL,
    student_fname   VARCHAR2(100),
    student_lname   VARCHAR2(100),
    group_id        NUMBER(38) NOT NULL,
    speciality_id   NUMBER(38) NOT NULL,
    faculty_id      NUMBER(38) NOT NULL,
    user_id         NUMBER(38) NOT NULL
);

ALTER TABLE student ADD CONSTRAINT student_pk PRIMARY KEY ( student_id );

CREATE TABLE sub_stud (
    student_id   NUMBER(38) NOT NULL,
    subject_id   NUMBER(38) NOT NULL
);

ALTER TABLE sub_stud ADD CONSTRAINT sub_stud_pk PRIMARY KEY ( subject_id,
                                                              student_id );

CREATE TABLE subjects (
    subject_id     NUMBER(38) NOT NULL,
    subject_name   VARCHAR2(100)
);

ALTER TABLE subjects ADD CONSTRAINT subjects_pk PRIMARY KEY ( subject_id );

CREATE TABLE teachers (
    teacher_id      NUMBER(38) NOT NULL,
    teacher_fname   VARCHAR2(100),
    teacher_lname   VARCHAR2(100),
    user_id         NUMBER(38) NOT NULL
);

ALTER TABLE teachers ADD CONSTRAINT teachers_pk PRIMARY KEY ( teacher_id );

CREATE TABLE "USER" (
    user_id         NUMBER(38) NOT NULL,
    user_login      VARCHAR2(100),
    user_password   VARCHAR2(100)
);

ALTER TABLE "USER" ADD CONSTRAINT user_pk PRIMARY KEY ( user_id );

ALTER TABLE estimates
    ADD CONSTRAINT estimates_comments_fk FOREIGN KEY ( comment_id )
        REFERENCES comments ( comment_id );

ALTER TABLE estimates
    ADD CONSTRAINT estimates_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE labs
    ADD CONSTRAINT labs_comments_fk FOREIGN KEY ( comment_id )
        REFERENCES comments ( comment_id );

ALTER TABLE labs
    ADD CONSTRAINT labs_subjects_fk FOREIGN KEY ( subject_id )
        REFERENCES subjects ( subject_id );

ALTER TABLE student
    ADD CONSTRAINT student_faculty_fk FOREIGN KEY ( faculty_id )
        REFERENCES faculty ( faculty_id );

ALTER TABLE student
    ADD CONSTRAINT student_group_fk FOREIGN KEY ( group_id )
        REFERENCES "GROUP" ( group_id );

ALTER TABLE student
    ADD CONSTRAINT student_speciality_fk FOREIGN KEY ( speciality_id )
        REFERENCES speciality ( speciality_id );

ALTER TABLE student
    ADD CONSTRAINT student_user_fk FOREIGN KEY ( user_id )
        REFERENCES "USER" ( user_id );

ALTER TABLE sub_stud
    ADD CONSTRAINT sub_stud_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE sub_stud
    ADD CONSTRAINT sub_stud_subjects_fk FOREIGN KEY ( subject_id )
        REFERENCES subjects ( subject_id );

ALTER TABLE teachers
    ADD CONSTRAINT teachers_user_fk FOREIGN KEY ( user_id )
        REFERENCES "USER" ( user_id );

ALTER TABLE estimates
    ADD CONSTRAINT estimates_comments_fk FOREIGN KEY ( comment_id )
        REFERENCES comments ( comment_id );

ALTER TABLE estimates
    ADD CONSTRAINT estimates_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE labs
    ADD CONSTRAINT labs_comments_fk FOREIGN KEY ( comment_id )
        REFERENCES comments ( comment_id );

ALTER TABLE labs
    ADD CONSTRAINT labs_subjects_fk FOREIGN KEY ( subject_id )
        REFERENCES subjects ( subject_id );

ALTER TABLE student
    ADD CONSTRAINT student_faculty_fk FOREIGN KEY ( faculty_id )
        REFERENCES faculty ( faculty_id );

ALTER TABLE student
    ADD CONSTRAINT student_group_fk FOREIGN KEY ( group_id )
        REFERENCES "GROUP" ( group_id );

ALTER TABLE student
    ADD CONSTRAINT student_speciality_fk FOREIGN KEY ( speciality_id )
        REFERENCES speciality ( speciality_id );

ALTER TABLE student
    ADD CONSTRAINT student_user_fk FOREIGN KEY ( user_id )
        REFERENCES "USER" ( user_id );

ALTER TABLE sub_stud
    ADD CONSTRAINT sub_stud_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE sub_stud
    ADD CONSTRAINT sub_stud_subjects_fk FOREIGN KEY ( subject_id )
        REFERENCES subjects ( subject_id );

ALTER TABLE teachers
    ADD CONSTRAINT teachers_user_fk FOREIGN KEY ( user_id )
        REFERENCES "USER" ( user_id );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            11
-- CREATE INDEX                             0
-- ALTER TABLE                             33
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
